<!--
Sync Impact Report
- Version change: none -> 1.0.0
- Modified principles: [PLACEHOLDERS] -> Spec-First; AI-Generated Code Only; Stateless by Default; Cloud-Native from Day One; Event-Driven Thinking; Architecture Guardrails & Governance
- Added sections: Purpose & Vision; Non-Negotiable Principles; Architectural Guardrails; AI Agent Governance; Quality & Review; Security & Compliance; Phase Progression; Definition of Done; Success Criteria
- Removed sections: placeholder tokens replaced (no removals of substantive sections)
- Templates requiring updates:
  - .specify/templates/plan-template.md: ⚠ pending (update Constitution Check to reflect mandatory gates and stack)
  - .specify/templates/spec-template.md: ⚠ pending (clarify mandatory fields that constitution enforces)
  - .specify/templates/tasks-template.md: ⚠ pending (ensure task categories include constitution-driven tasks like observability, Dapr integration)
  - .specify/templates/commands/*.md: ⚠ pending (scan for CLAUDE-specific guidance and agent names)
- Follow-up TODOs:
  - TODO(RATIFICATION_DATE): confirm historical ratification date if different from adoption date (set to 2025-12-31 for initial ratification)
  - Update plan/spec/tasks templates to include explicit "Constitution Check" gates and stack enforcement
-->

# Evolution of Todo Constitution

## Core Principles

### Spec-First, Always
No code may be written without an approved specification. Every implementation MUST map to a specification, a plan, and a task list (speckit.specify, speckit.plan, speckit.tasks). Implementations without an associated Task ID are NOT permitted. Rationale: ensures traceability, reviewability, and repeatability across AI-driven implementations.

### AI-Generated Code Only
All application code in this repository MUST be generated by authorized AI agent tooling (Claude Code and MCP-exposed Spec‑Kit Plus commands). Humans may author and refine specifications and review outputs, but MUST NOT directly hand-write production application code. Rationale: enforces reproducible agent-led development and auditability of generated artifacts.

### Stateless by Default
Services MUST be designed statelessly: no in-memory business state. All persistent state MUST be stored in durable backing stores (databases, Dapr state stores) and access mediated through explicit interfaces. Rationale: enables horizontal scaling, reproducible test environments, and cloud-native deployments.

### Cloud-Native from Day One
All design and implementation decisions MUST anticipate cloud deployment: clear service boundaries, environment-based configuration, no hard-coded secrets, and Docker-ready architectures. Rationale: ensures architectural compatibility with Kubernetes, Helm, and Dapr when moving beyond prototypes.

### Event-Driven Thinking
State changes MUST emit events (where applicable); event-driven patterns (Dapr/Kafka as backbone in later phases) are the default for cross-service communication and eventual integration. CRUD-only implementations are acceptable for early phases, but the architecture MUST include an event strategy for Phase V. Rationale: supports eventual scaling to distributed event-driven workflows.

### Architecture Guardrails & Traceability
Approved stacks, runtime abstractions, and the monorepo layout are mandatory guardrails. Every significant file and change MUST reference a Task ID and Spec section for traceability. If a deviation from an approved technology or layout is required, it MUST be proposed as a constitutional amendment. Rationale: enforceable constraints reduce drift and maintain clarity for agent-driven automation.

## Constraints & Technology Stack

The project declares an approved technology stack and related constraints. Deviations require an explicit amendment.

- Languages: Python 3.13+ and TypeScript (only as specified in the plan).
- Backend framework: FastAPI.
- Frontend framework: Next.js (App Router) when frontend is required.
- ORM: SQLModel.
- Database: Neon Serverless PostgreSQL (or an equivalent cloud Postgres offering documented in the plan).
- Containerization: Docker. Orchestration: Kubernetes. Packaging: Helm.
- Runtime abstraction: Dapr for state and pub/sub. Events: Kafka (via Dapr pub/sub) for Phase V.
- AI & Agents: OpenAI Agents SDK (or agent infrastructure explicitly approved in the plan).

Non-functional constraints:
- No secrets in code; use environment variables or Dapr secrets stores.
- JWT-based authentication required on backend endpoints unless the spec documents a safe exception.
- Services MUST expose health/readiness endpoints suitable for orchestration.

## Development Workflow & Quality Gates

The project enforces a spec-driven workflow and mandatory quality gates:

- Spec → Plan → Tasks → Implementation is the required progression. The /sp.plan and /sp.tasks outputs MUST be produced before code generation.
- Tests: TDD practice is strongly encouraged where feasible; critical tests (contract/integration) are mandatory for cross-service changes.
- Code review: PRs MUST link to the Spec and Task ID and include a short migration/rollback note when applicable.
- Observability: Structured logging, basic metrics, and tracing hooks MUST be included for services implementing non-trivial behavior.
- CI gates: builds, linters, and the constitution compliance checks (see Constitution Check in plan-template.md) MUST pass before merges to protected branches.

## Governance

Amendments and governance rules:

- This Constitution supersedes informal practices. Amendments require:
  1) A spec describing the proposed change, 2) A plan documenting the impact and migration steps, and 3) Approval by the Product Architect or a delegated governance triage (documented in history/adr/).
  2) For non-breaking clarifications (typo, wording), a PATCH increment is used. For new mandatory principles or material expansions, MINOR is used. For redefinitions/removals that break prior behavior, MAJOR is required.
- Ratification and amendment dates are recorded below.
- Compliance checks: PR authors MUST identify which principle(s) their change touches and add a short justification in PR body.

**Version**: 1.0.0 | **Ratified**: 2025-12-31 | **Last Amended**: 2025-12-31
